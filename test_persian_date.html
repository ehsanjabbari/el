<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØ³Øª ØªØ§Ø±ÛŒØ® Ø´Ù…Ø³ÛŒ</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { 
            font-family: 'Vazirmatn', Arial, sans-serif; 
            margin: 20px; 
            background: #f5f5f5; 
            line-height: 1.6;
        }
        .test-section { 
            background: white; 
            padding: 20px; 
            margin: 20px 0; 
            border-radius: 8px; 
            box-shadow: 0 2px 10px rgba(0,0,0,0.1); 
        }
        .btn { 
            background: #4CAF50; 
            color: white; 
            padding: 10px 20px; 
            border: none; 
            border-radius: 5px; 
            cursor: pointer; 
            margin: 5px; 
            font-family: 'Vazirmatn', Arial, sans-serif;
        }
        .btn:hover { background: #45a049; }
        .result { 
            margin-top: 15px; 
            padding: 15px; 
            background: #e8f5e8; 
            border-radius: 5px; 
            border: 1px solid #4CAF50; 
        }
        .error { 
            background: #ffe8e8; 
            border-color: #f44336; 
            color: #d32f2f; 
        }
    </style>
</head>
<body>
    <h1>ğŸ“… ØªØ³Øª Ø³ÛŒØ³ØªÙ… ØªØ§Ø±ÛŒØ® Ø´Ù…Ø³ÛŒ</h1>
    <p><strong>Ø¢Ø®Ø±ÛŒÙ† Ø§ØµÙ„Ø§Ø­:</strong> ØªØ¨Ø¯ÛŒÙ„ Ú©Ù„ Ø³ÛŒØ³ØªÙ… Ø¨Ù‡ ØªØ§Ø±ÛŒØ® Ø´Ù…Ø³ÛŒ Ú©Ø§Ù…Ù„</p>
    
    <div class="test-section">
        <h2>ğŸ”„ ØªØ³Øª ØªØ¨Ø¯ÛŒÙ„ ØªØ§Ø±ÛŒØ®</h2>
        <button class="btn" onclick="testDateConversion()">ØªØ³Øª ØªØ¨Ø¯ÛŒÙ„ ØªØ§Ø±ÛŒØ®</button>
        <button class="btn" onclick="testDatePicker()">ØªØ³Øª Date Picker</button>
        <button class="btn" onclick="testValidation()">ØªØ³Øª Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ</button>
        <div id="dateTestResult"></div>
    </div>
    
    <div class="test-section">
        <h2>ğŸ“… Date Picker ÙØ§Ø±Ø³ÛŒ</h2>
        <div id="datePickerContainer"></div>
    </div>
    
    <div class="test-section">
        <h2>ğŸ—“ï¸ ØªÙ‚ÙˆÛŒÙ… Ø´Ù…Ø³ÛŒ</h2>
        <button class="btn" onclick="showCalendar()">Ù†Ù…Ø§ÛŒØ´ ØªÙ‚ÙˆÛŒÙ…</button>
        <div id="calendarResult"></div>
    </div>

    <script src="app.js"></script>
    <script>
        function testDateConversion() {
            const today = new Date();
            const persianDate = app.getPersianDate(today);
            const persianLongDate = app.getPersianDateLong(today);
            
            // Test conversion
            const gregorian = app.toGregorian(1403, 8, 16);
            const jalali = app.toJalali(2024, 11, 6);
            
            document.getElementById('dateTestResult').innerHTML = `
                <div class="result">
                    <strong>ØªØ³Øª ØªØ¨Ø¯ÛŒÙ„ ØªØ§Ø±ÛŒØ®:</strong><br>
                    Ø§Ù…Ø±ÙˆØ² (Ù…ÛŒÙ„Ø§Ø¯ÛŒ): ${today.toLocaleDateString()}<br>
                    Ø§Ù…Ø±ÙˆØ² (Ø´Ù…Ø³ÛŒ): ${persianDate}<br>
                    Ø§Ù…Ø±ÙˆØ² (Ø´Ù…Ø³ÛŒ Ú©Ø§Ù…Ù„): ${persianLongDate}<br>
                    <br>
                    ØªØ¨Ø¯ÛŒÙ„ Ø¨Ø±Ø¹Ú©Ø³: 1403/08/16 â†’ ${gregorian.date.toLocaleDateString()}<br>
                    ØªØ¨Ø¯ÛŒÙ„ Ø±Ùˆ Ø¨Ù‡ Ø¬Ù„Ùˆ: 2024/11/06 â†’ ${jalali.year}/${jalali.month}/${jalali.day}
                </div>
            `;
        }
        
        function testDatePicker() {
            const container = document.getElementById('datePickerContainer');
            app.createPersianDatePicker(container);
            document.getElementById('dateTestResult').innerHTML = `
                <div class="result">
                    âœ… Date picker ÙØ§Ø±Ø³ÛŒ Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯!<br>
                    Ù„Ø·ÙØ§Ù‹ ØªØ§Ø±ÛŒØ® Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯ Ùˆ Ø³Ù¾Ø³ Ø¯Ú©Ù…Ù‡ Ø²ÛŒØ± Ø±Ø§ Ø¨Ø²Ù†ÛŒØ¯:
                    <button class="btn" onclick="getDateFromPicker()">Ø¯Ø±ÛŒØ§ÙØª ØªØ§Ø±ÛŒØ® Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯Ù‡</button>
                </div>
            `;
        }
        
        function getDateFromPicker() {
            const picker = document.querySelector('#datePickerContainer .persian-date-picker');
            if (picker) {
                const date = app.getDateFromPicker(picker);
                document.getElementById('dateTestResult').innerHTML = `
                    <div class="result">
                        ğŸ“… ØªØ§Ø±ÛŒØ® Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯Ù‡: ${date}
                    </div>
                `;
            } else {
                document.getElementById('dateTestResult').innerHTML = `
                    <div class="result error">
                        âŒ Date picker ÛŒØ§ÙØª Ù†Ø´Ø¯
                    </div>
                `;
            }
        }
        
        function testValidation() {
            const testDates = [
                '1403/08/16',  // Valid
                '1403/13/01',  // Invalid month
                '1403/02/30',  // Invalid day
                '2024/11/06',  // Invalid format
                'abc/def/gh',  // Invalid format
            ];
            
            let results = '<div class="result"><strong>Ù†ØªØ§ÛŒØ¬ Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ:</strong><br>';
            testDates.forEach(date => {
                const isValid = app.validatePersianDate(date);
                results += `${date}: ${isValid ? 'âœ…' : 'âŒ'}<br>`;
            });
            results += '</div>';
            
            document.getElementById('dateTestResult').innerHTML = results;
        }
        
        function showCalendar() {
            const today = new Date();
            const currentPersian = app.toJalali(today.getFullYear(), today.getMonth() + 1, today.getDate());
            const monthNames = [
                'ÙØ±ÙˆØ±Ø¯ÛŒÙ†', 'Ø§Ø±Ø¯ÛŒØ¨Ù‡Ø´Øª', 'Ø®Ø±Ø¯Ø§Ø¯', 'ØªÛŒØ±', 'Ù…Ø±Ø¯Ø§Ø¯', 'Ø´Ù‡Ø±ÛŒÙˆØ±',
                'Ù…Ù‡Ø±', 'Ø¢Ø¨Ø§Ù†', 'Ø¢Ø°Ø±', 'Ø¯ÛŒ', 'Ø¨Ù‡Ù…Ù†', 'Ø§Ø³ÙÙ†Ø¯'
            ];
            
            let calendar = `<div class="result">
                <h3>ğŸ—“ï¸ ØªÙ‚ÙˆÛŒÙ… Ø´Ù…Ø³ÛŒ</h3>
                <strong>Ø§Ù…Ø±ÙˆØ²:</strong> ${app.getPersianDateLong(today)}<br>
                <strong>Ù…Ø§Ù‡ Ø¬Ø§Ø±ÛŒ:</strong> ${monthNames[currentPersian.month - 1]} ${currentPersian.year}<br>
                <strong>Ø±ÙˆØ² Ù‡ÙØªÙ‡:</strong> ${['Ø´Ù†Ø¨Ù‡', 'ÛŒÚ©Ø´Ù†Ø¨Ù‡', 'Ø¯ÙˆØ´Ù†Ø¨Ù‡', 'Ø³Ù‡â€ŒØ´Ù†Ø¨Ù‡', 'Ú†Ù‡Ø§Ø±Ø´Ù†Ø¨Ù‡', 'Ù¾Ù†Ø¬â€ŒØ´Ù†Ø¨Ù‡', 'Ø¬Ù…Ø¹Ù‡'][currentPersian.weekday]}<br>
                <br>
                <strong>Ø±ÙˆØ²Ù‡Ø§ÛŒ Ù‡ÙØªÙ‡:</strong><br>
                Ø´Ù†Ø¨Ù‡ | ÛŒÚ©Ø´Ù†Ø¨Ù‡ | Ø¯ÙˆØ´Ù†Ø¨Ù‡ | Ø³Ù‡â€ŒØ´Ù†Ø¨Ù‡ | Ú†Ù‡Ø§Ø±Ø´Ù†Ø¨Ù‡ | Ù¾Ù†Ø¬â€ŒØ´Ù†Ø¨Ù‡ | Ø¬Ù…Ø¹Ù‡
            </div>`;
            
            document.getElementById('calendarResult').innerHTML = calendar;
        }
        
        // Auto-run tests
        window.addEventListener('load', function() {
            console.log('ğŸ—“ï¸ Ø³ÛŒØ³ØªÙ… ØªØ§Ø±ÛŒØ® Ø´Ù…Ø³ÛŒ Ø¢Ù…Ø§Ø¯Ù‡ Ø§Ø³Øª');
            testDateConversion();
        });
    </script>
</body>
</html>